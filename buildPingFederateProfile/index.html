
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://devops.pingidentity.com/buildPingFederateProfile/">
      
      
      <link rel="shortcut icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>Build Your Own PingFederate Profile - Ping Identity DevOps</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../mkdocs/overrides/stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="blue">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-a-pingfederate-profile-from-your-current-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://devops.pingidentity.com/" title="Ping Identity DevOps" class="md-header-nav__button md-logo" aria-label="Ping Identity DevOps">
      <!-- Logo -->

  


    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Ping Identity DevOps
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Build Your Own PingFederate Profile
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/pingidentity/pingidentity-devops-getting-started" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pingidentity/pingidentity-devops-getting-started
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
    
    <a href=".." class="md-tabs__link">
      DEVOPS @ PING
    </a>
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
      
      <a href="../getStarted/" class="md-tabs__link">
        GET STARTED
      </a>
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
      
      <a href="../deploy/" class="md-tabs__link">
        WORKING WITH IMAGES
      </a>
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
      
        
      
      <a href="../config/" class="md-tabs__link md-tabs__link--active">
        CUSTOMIZING
      </a>
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
      
      <a href="../relnotes-2010/" class="md-tabs__link">
        RELEASE NOTES
      </a>
    </li>
  

      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://devops.pingidentity.com/" title="Ping Identity DevOps" class="md-nav__button md-logo" aria-label="Ping Identity DevOps">
      <!-- Logo -->

  


    </a>
    Ping Identity DevOps
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pingidentity/pingidentity-devops-getting-started" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pingidentity/pingidentity-devops-getting-started
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      DEVOPS @ PING
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" class="md-nav__link">
      OVERVIEW
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    <label class="md-nav__link" for="nav-3">
      GET STARTED
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="GET STARTED" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        GET STARTED
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getStarted/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../devopsRegistration/" class="md-nav__link">
      DevOps registration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getStartedWithGitRepo/" class="md-nav__link">
      Deploy an example stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PROD-LICENSE/" class="md-nav__link">
      DevOps product licenses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../devopsUserKey/" class="md-nav__link">
      Using your DevOps user and key
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../existingLicense/" class="md-nav__link">
      Using an existing product license
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../saveConfigs/" class="md-nav__link">
      Saving your configuration changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      WORKING WITH IMAGES
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="WORKING WITH IMAGES" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        WORKING WITH IMAGES
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../buildLocal/" class="md-nav__link">
      Build a Docker product image locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployStandalone/" class="md-nav__link">
      Deploy standalone containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" >
    <label class="md-nav__link" for="nav-4-4">
      Orchestrate with Docker-Compose
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Orchestrate with Docker-Compose" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        <span class="md-nav__icon md-icon"></span>
        Orchestrate with Docker-Compose
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployCompose/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploySimpleStack/" class="md-nav__link">
      Deploy a PingFederate and PingDirectory stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployReplication/" class="md-nav__link">
      Deploy a replicated PingDirectory pair
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploySync/" class="md-nav__link">
      Deploy PingDirectory with data synchronization using PingDataSync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPingCentral/" class="md-nav__link">
      Deploy PingCentral
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPfCluster/" class="md-nav__link">
      Deploy a PingFederate cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPaCluster/" class="md-nav__link">
      Deploy a PingAccess cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPdgPap/" class="md-nav__link">
      Deploy PingDataGovernance with PAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployMonitoringStack/" class="md-nav__link">
      Deploy a monitoring stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploySiemStack/" class="md-nav__link">
      Deploy an Elasticsearch SIEM stack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5" >
    <label class="md-nav__link" for="nav-4-5">
      Orchestrate with Kubernetes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Orchestrate with Kubernetes" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        <span class="md-nav__icon md-icon"></span>
        Orchestrate with Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8s/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployHelm/" class="md-nav__link">
      Deploy with PingIdentiy Helm Charts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sPD-clusters/" class="md-nav__link">
      PingDirectory deployments across Kubernetes clusters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5-4" type="checkbox" id="nav-4-5-4" >
    <label class="md-nav__link" for="nav-4-5-4">
      Kubernetes deployments for general use
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Kubernetes deployments for general use" data-md-level="3">
      <label class="md-nav__title" for="nav-4-5-4">
        <span class="md-nav__icon md-icon"></span>
        Kubernetes deployments for general use
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sGeneral/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sStandalone/" class="md-nav__link">
      Orchestrate standalone deployments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sFullstack/" class="md-nav__link">
      Orchestrate a full stack deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sReplicated/" class="md-nav__link">
      Orchestrate a replicated PingDirectory deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sPA-cluster/" class="md-nav__link">
      Orchestrate a PingAccess cluster deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sPF-cluster/" class="md-nav__link">
      Orchestrate a PingFederate cluster deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5-4-7" type="checkbox" id="nav-4-5-4-7" >
    <label class="md-nav__link" for="nav-4-5-4-7">
      Deploy PingFederate Across Multiple Kubernetes Clusters
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deploy PingFederate Across Multiple Kubernetes Clusters" data-md-level="4">
      <label class="md-nav__title" for="nav-4-5-4-7">
        <span class="md-nav__icon md-icon"></span>
        Deploy PingFederate Across Multiple Kubernetes Clusters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sPFclusters/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPFMultiRegionDNS/" class="md-nav__link">
      PingFederate Across Kubernetes with DNS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployPFMultiRegionAWS/" class="md-nav__link">
      PingFederate Across Kubernetes with S3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5-5" type="checkbox" id="nav-4-5-5" >
    <label class="md-nav__link" for="nav-4-5-5">
      Kubernetes deployments for cloud platforms
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Kubernetes deployments for cloud platforms" data-md-level="3">
      <label class="md-nav__title" for="nav-4-5-5">
        <span class="md-nav__icon md-icon"></span>
        Kubernetes deployments for cloud platforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8sCloud/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8s-AWS/" class="md-nav__link">
      Deploy Peered EKS clusters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployK8s-AKS/" class="md-nav__link">
      Deploy to Azure Kubernetes Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8sClusterSizing/" class="md-nav__link">
      Sizing Kubernetes clusters
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployVault/" class="md-nav__link">
      Deploy Hashicorp Vault
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    <label class="md-nav__link" for="nav-5">
      CUSTOMIZING
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="CUSTOMIZING" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        CUSTOMIZING
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../config/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2" checked>
    <label class="md-nav__link" for="nav-5-2">
      Server profile anatomy
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Server profile anatomy" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        <span class="md-nav__icon md-icon"></span>
        Server profile anatomy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../containerAnatomy/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../profileStructures/" class="md-nav__link">
      Server profile structures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../profiles/" class="md-nav__link">
      Customizing server profiles
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Build Your Own PingFederate Profile
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Build Your Own PingFederate Profile
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    Prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#similarities" class="md-nav__link">
    Similarities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bulk-api-export-profile-method" class="md-nav__link">
    Bulk API Export Profile Method
  </a>
  
    <nav class="md-nav" aria-label="Bulk API Export Profile Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-youll-do" class="md-nav__link">
    What You'll Do
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-the-bulk-api-export-profile-worthy" class="md-nav__link">
    Make the Bulk API Export "Profile Worthy"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-notes" class="md-nav__link">
    Additional Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-archive-profiles" class="md-nav__link">
    Config Archive Profiles
  </a>
  
    <nav class="md-nav" aria-label="Config Archive Profiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparing-profile-methods" class="md-nav__link">
    Comparing Profile Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-youll-do_1" class="md-nav__link">
    What You'll Do
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../profilesLayered/" class="md-nav__link">
      Layering server profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../profilesSubstitution/" class="md-nav__link">
      Environment substitution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../privateRepos/" class="md-nav__link">
      Using private Github repositories
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../yamlFiles/" class="md-nav__link">
      Customizing YAML files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../variableScoping/" class="md-nav__link">
      Variables and scope
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usingCertificates/" class="md-nav__link">
      Using Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hooks/" class="md-nav__link">
      Using DevOps hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releaseTags/" class="md-nav__link">
      Using release tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../imageSupport/" class="md-nav__link">
      Using supported images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usingVault/" class="md-nav__link">
      Using Hashicorp Vault
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secureContainers/" class="md-nav__link">
      Securing the containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerImageSecurity/" class="md-nav__link">
      Evaluation of Docker base image security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../addMOTD/" class="md-nav__link">
      Adding a message of the day (MOTD)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-13" type="checkbox" id="nav-5-13" >
    <label class="md-nav__link" for="nav-5-13">
      Managing deployments
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Managing deployments" data-md-level="2">
      <label class="md-nav__title" for="nav-5-13">
        <span class="md-nav__icon md-icon"></span>
        Managing deployments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../manage/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgradePingfederate/" class="md-nav__link">
      Upgrading PingFederate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgradePingDirectory/" class="md-nav__link">
      Upgrading PingDirectory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-14" type="checkbox" id="nav-5-14" >
    <label class="md-nav__link" for="nav-5-14">
      Utilities
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Utilities" data-md-level="2">
      <label class="md-nav__title" for="nav-5-14">
        <span class="md-nav__icon md-icon"></span>
        Utilities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../devopsUtils/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pingDevopsUtil/" class="md-nav__link">
      The `ping-devops` utility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ldapsdkUtil/" class="md-nav__link">
      The `ldap-sdk-tools` utility
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting/" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-16" type="checkbox" id="nav-5-16" >
    <label class="md-nav__link" for="nav-5-16">
      Docker images reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Docker images reference" data-md-level="2">
      <label class="md-nav__title" for="nav-5-16">
        <span class="md-nav__icon md-icon"></span>
        Docker images reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dockerImagesRef/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingfederate/" class="md-nav__link">
      PingFederate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingaccess/" class="md-nav__link">
      PingAccess
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdirectory/" class="md-nav__link">
      PingDirectory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdirectoryproxy/" class="md-nav__link">
      PingDirectoryProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdatagovernance/" class="md-nav__link">
      PingDataGovernance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdatagovernancepap/" class="md-nav__link">
      PingDataGovernance PAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdatasync/" class="md-nav__link">
      PingDataSync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdelegator/" class="md-nav__link">
      PingDelegator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingcentral/" class="md-nav__link">
      PingCentral
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingintelligence/" class="md-nav__link">
      PingIntelligence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/ldap-sdk-tools/" class="md-nav__link">
      ldap-sdk-tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdataconsole/" class="md-nav__link">
      Ping Data Console
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdownloader/" class="md-nav__link">
      PingDownloader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingbase/" class="md-nav__link">
      PingBase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingcommon/" class="md-nav__link">
      PingCommon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/pingdatacommon/" class="md-nav__link">
      PingDataCommon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-images/apache-jmeter/" class="md-nav__link">
      Apache JMeter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    <label class="md-nav__link" for="nav-6">
      RELEASE NOTES
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="RELEASE NOTES" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        RELEASE NOTES
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2010/" class="md-nav__link">
      Current
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2009/" class="md-nav__link">
      Version 2009
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2008/" class="md-nav__link">
      Version 2008
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2007/" class="md-nav__link">
      Version 2007
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2006/" class="md-nav__link">
      Version 2006
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2005/" class="md-nav__link">
      Version 2005
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2004/" class="md-nav__link">
      Version 2004
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../relnotes-2003/" class="md-nav__link">
      Version 2003
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../LICENSE/" class="md-nav__link">
      LICENSE
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DISCLAIMER.md" class="md-nav__link">
      DISCLAIMER
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3RD_PARTY_SOFTWARE/" class="md-nav__link">
      THIRD-PARTY SOFTWARE
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" class="md-nav__link">
      CONTRIBUTING
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    Prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#similarities" class="md-nav__link">
    Similarities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bulk-api-export-profile-method" class="md-nav__link">
    Bulk API Export Profile Method
  </a>
  
    <nav class="md-nav" aria-label="Bulk API Export Profile Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-youll-do" class="md-nav__link">
    What You'll Do
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-the-bulk-api-export-profile-worthy" class="md-nav__link">
    Make the Bulk API Export "Profile Worthy"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-notes" class="md-nav__link">
    Additional Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-archive-profiles" class="md-nav__link">
    Config Archive Profiles
  </a>
  
    <nav class="md-nav" aria-label="Config Archive Profiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparing-profile-methods" class="md-nav__link">
    Comparing Profile Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-youll-do_1" class="md-nav__link">
    What You'll Do
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="building-a-pingfederate-profile-from-your-current-deployment">Building a PingFederate Profile From your Current Deployment.<a class="headerlink" href="#building-a-pingfederate-profile-from-your-current-deployment" title="Permanent link"> ¶</a></h1>
<p>The term "profile" can vary in many instances. Here we will focus on two types of profiles for PingFederate: configuration archive, and bulk export. We will discuss the similarities and differences between two as well as how to build either from a running PingFederate environment.</p>
<h2 id="prerequisite">Prerequisite<a class="headerlink" href="#prerequisite" title="Permanent link"> ¶</a></h2>
<ul>
<li>
<p>You've already been through <a href="../getStarted/">Get Started</a> to set up your DevOps environment and run a test deployment of the products.</p>
</li>
<li>
<p>You understand our <a href="../containerAnatomy/">product container anatomy</a>.</p>
</li>
<li>
<p>Recommended: You've read through <a href="../profiles/">Customizing Server Profiles</a></p>
</li>
</ul>
<h2 id="similarities">Similarities<a class="headerlink" href="#similarities" title="Permanent link"> ¶</a></h2>
<p>The two profile methods we are covering are:
- <strong>bulk api export</strong> - the resulting <code>.json</code> from the admin api at /bulk/export. typically saved as <code>data.json</code>
- <strong>configuration archive</strong> Pulled either from the admin UI - Server &gt; Configuration Archive or from the admin API at <code>/configArchive</code>. We'll call the result of this output <code>data.zip</code> or the <code>/data</code> folder. </p>
<!-- INSERT LINK ON NEXT LINE FOR PF CONFIG DEPLOYMENTS -->
<blockquote>
<p>Deciding which method you use should be based on how you plan to <a href="LINKNEEDED">deploy configurations updates</a></p>
</blockquote>
<p>Both of these methods are considered file-based profiles. This means a "complete profile" looks like a <strong>subset</strong> of files that you would typically find in a running pingfederate filesystem. Again, this is a <strong>subset</strong> of files. Specifically, the minimial number of files needed to achieve your PingFederate configuration. All additional files that are not specific to your configuration should be left out as they will be filled in by the PingFederate docker image. (Refer to <a href="../containerAnatomy/">container anatomy</a> for additional details).</p>
<p>Considering the above, familiarity with the PingFederate filesystem will help you achieve the optimal profile. Some key information can be found in <a href="../profileStructures/">profile structures</a>. But, to put it simply, you want to at least save every file outside of <code>pingfederate/server/default/data</code> that you've edited</p>
<p>Additionally, all files that are included in the profile should also be environment agnostic. This typically means turning hostnames and secrets into <a href="profileSubstitution.md">variables that can be delivered from the orchestration layer</a>.</p>
<h2 id="bulk-api-export-profile-method">Bulk API Export Profile Method<a class="headerlink" href="#bulk-api-export-profile-method" title="Permanent link"> ¶</a></h2>
<h3 id="what-youll-do">What You'll Do<a class="headerlink" href="#what-youll-do" title="Permanent link"> ¶</a></h3>
<p>A summary of the resulting process: </p>
<ol>
<li>Export a <code>data.json</code> from /bulk/export</li>
<li>Configure and run bulkconfig tool</li>
<li>Export Key Pairs</li>
<li>base64 encode exported key pairs</li>
<li>add <code>data.json.subst</code> to your profile at <code>instance/bulk-config/data.json.subst</code></li>
</ol>
<blockquote>
<p>Rather than just following the above steps, we will look at this comprehensively to understand purpose. Use the steps for reference as needed</p>
</blockquote>
<p>A PingFederate Admin/Console will import a <code>data.json</code> on startup if it finds it in <code>instance/bulk-config/data.json</code>. </p>
<p>The PF admin api <code>/bulk/export</code> endpoint will output a large json blob that is representative of the entire <code>pingfederate/server/default/data</code> folder, pingfederate 'core config', or a representation of anything you would configure from the pingfederate UI. You could consider it "the configuration archive in json format". </p>
<p>So, you could just: 
1. Go to a running pingfederate, run: 
  <div class="highlight"><pre><span></span><code>curl --location --request GET <span class="s1">&#39;https://pingfederate-admin.ping-devops.com/pf-admin-api/v1/bulk/export&#39;</span> <span class="se">\</span>
  --header <span class="s1">&#39;X-XSRF-Header: PingFederate&#39;</span> <span class="se">\</span>
  --user <span class="s2">&quot;administrator:</span><span class="si">${</span><span class="nv">passsword</span><span class="si">}</span><span class="s2">&quot;</span> &gt; data.json
</code></pre></div>
2. Save data.json into a profile at <code>instance/bulk-config/data.json</code>
3. delete everything except <code>pf.jwk</code> in <code>instance/server/default/data</code></p>
<p>And you will have a bulk api export "profile". This is handy because the entire config is on a single file and if you store it in source control you then only have to compare differences on one file. However, there's <em>much more</em> hidden value beyond being on one file.</p>
<h3 id="make-the-bulk-api-export-profile-worthy">Make the Bulk API Export "Profile Worthy"<a class="headerlink" href="#make-the-bulk-api-export-profile-worthy" title="Permanent link"> ¶</a></h3>
<p>By default, the resulting <code>data.json</code> from the export contains encrypted values, and to import this file, your pingfederate needs to have the corresponding master key (<code>pf.jwk</code>) in <code>pingfederate/server/default/data</code>. Note, in the devops world, we call this folder <code>instance/server/default/data</code>. However, each of the encrypted values also have the option to be replaced with an unencrypted form and, when required, a corresponding password. </p>
<p>For example the ssl server cert from the <a href="https://github.com/pingidentity/pingidentity-server-profiles/tree/master/baseline/pingfederate">pingfederate baseline profile</a> when exported to data.json looks like: </p>
<div class="highlight"><pre><span></span><code>      <span class="p">{</span>
          <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;/keyPairs/sslServer&quot;</span><span class="p">,</span>
          <span class="nt">&quot;operationType&quot;</span><span class="p">:</span> <span class="s2">&quot;SAVE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;sslservercert&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;fileData&quot;</span><span class="p">:</span> <span class="s2">&quot;MIIRBwIBAzCCEMAGCSqGSIb3DQEHAaCCELEEghCtMIIQqTCCCeUGCSqGSIb3DQEHAaCCCdYEggnSMIIJzjCCCcoGCyqGSIb3DQEMCgECoIIJezCCCXcwKQYKKoZIhvcNAQwBAzAbBBQu6vDERQZX3uujWa7v_q3sYN4Q0gIDAMNQBIIJSFtdWbvLhzYrTqeKKiJqiqROgE0E4mkVvmEC6NwhhPbcH37IDNvVLu0umm--CDZnEmlyPpUucO345-U-6z-cskw4TbsjYIzM10MwS6JdsyYFTC3GwqioqndVgBUzDh8xGnfzx52zEehX8d-ig1F6xYsbEc01gTbh4lF5MA7E7VfoTa4hWqtceV8PQeqzJNarlZyDSaS5BLn1J6G9BYUze-M1xGhATz7F2l-aAt6foi0mwIBlc2fwsdEPuAALZgdG-q_V4gOJW2K0ONnmWhMgMLpCL42cmSb</span>
<span class="s2">                  ... more encrypted text ...</span>
<span class="s2">                  Yxpzp_srpy4LHNdgHqhVBhqtDrjeKJDRfc1yk21P5PpfEBxn5MD4wITAJBgUrDgMCGgUABBQLBpq8y79Pq1TzG1Xf6OAjZzBZaQQUC4kD4CkcrH-WTQhJHud850ddn08CAwGGoA==&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;encryptedPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2Iiwia2lkIjoiRW1JY1UxOVdueSIsInZlcnNpb24iOiIxMC4xLjEuMCJ9..l6PJ55nSSvKHl0vSWTpkOA.i7hpnnu2yIByhyq_aGBCdaqS3u050yG8eMRGnLRx2Yk.Mo4WSkbbJyLISHq6i4nlVA&quot;</span>
              <span class="p">}</span>
          <span class="p">]</span>
      <span class="p">}</span>
</code></pre></div>
<p>But this master key dependent form can be converted to:</p>
<div class="highlight"><pre><span></span><code>      <span class="p">{</span>
          <span class="nt">&quot;operationType&quot;</span><span class="p">:</span> <span class="s2">&quot;SAVE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[{</span>
              <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;2FederateM0re&quot;</span><span class="p">,</span>
              <span class="nt">&quot;fileData&quot;</span><span class="p">:</span> <span class="s2">&quot;MIIRCQIBAzCCEM8GCSqGSIb3DQEHAaCCEMAEghC8MIIQuDCCC28GCSqGSIb3DQEHBqCCC2AwggtcAgEAMIILVQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIjXWLRGuGNIQCAggAgIILKOgCQ9onDqBPQsshsaS50OjWtj\/7s47BUYal1YhO70fBup1a82WGHGhAvb\/SY1yOhqQR+TloEBOPI5cExoGN\/Gvw2Mw5\/wkQZZMSHqxjz68KhN4B0hrsOf4rqShB7jsz9ebSml3r2w0sUZWR73GBtBt1Y3wIlXLS2WtqdtHra9VnUqp1eOk+xenjuWM+u2ndDD43GgKB3n8mNBSSVBqx6ne7aSRJRuAUd+HAzLvSeXjTPMObI1Jod2F+7</span>
<span class="s2">              ... more base64 encoded exported .p12 ...</span>
<span class="s2">              5QJ15OJp2iEoVBWxogKf64s2F0iIYPoo6yjNvlidZCevP564FwknWrHoD7R8cIBrhlCJQbEOpOhPg66r4MK1CeJ2poaKRlMS8HGcMRaTpaqD+pIlgmUS6xFw49vr9Kwfb7KteRsTkNR+I8A7HjUpuCMSUwIwYJKoZIhvcNAQkVMRYEFOb7g1xwDka5fJ4sqngEvzTyuWnpMDEwITAJBgUrDgMCGgUABBRlJ+D+FR\/vQbaTGbKDFiBK\/xDbqQQIAjLc+GgRg44CAggA&quot;</span><span class="p">,</span>
              <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;sslservercert&quot;</span>
          <span class="p">}],</span>
          <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;/keyPairs/sslServer&quot;</span>
      <span class="p">}</span>
</code></pre></div>
<p>What happened:
1. Exported the private key+cert of the server cert with alias <code>sslservercert</code>. Upon export, a password is requested and <code>2FederateM0re</code> was used. This results in download of a pssword protected <code>.p12</code> file. 
2. on data.json key name <code>encryptedPassword</code> converted to just <code>password</code>
3. the value for <code>fileData</code> is replaced with a base64 encoded version of the exported <code>.p12</code> file.</p>
<p>This is a process that can be used for all encrypted items and environment specific items:
- Key Pairs (.p12)
- Trusted Certs (x509)
- Admin Password
- Data Store Passwords
- Integration Kit Properties
- Hostnames</p>
<p>Now, if you follow this through the entire data.json, it would take a while, and you would be left with a file that is unacceptable for source control (since it's completely unencrypted). So, the next logical step is to abstract the unencrypted values and replace with variables. Then the values can be stored in a secrets management and the variablized file can be in source control. </p>
<p>Doing all this would manually would take a long time, fortunately, there's a <a href="../99-helper-scripts/ping-bulkconfigtool">tool for this!</a>
Detailed steps for using the tool are documented next to where it is stored. The general concept is to point the tool at the <code>data.json</code> and a config file. After running you will be left with a <code>data.json.subst</code> and a list of environment variables waiting to be filled. </p>
<p>The <code>data.json.subst</code> form of our example above will look like:
<div class="highlight"><pre><span></span><code>      <span class="p">{</span>
          <span class="nt">&quot;operationType&quot;</span><span class="p">:</span> <span class="s2">&quot;SAVE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[{</span>
              <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;${keyPairs_sslServer_items_sslservercert_sslservercert_password}&quot;</span><span class="p">,</span>
              <span class="nt">&quot;fileData&quot;</span><span class="p">:</span> <span class="s2">&quot;${keyPairs_sslServer_items_sslservercert_sslservercert_fileData}&quot;</span><span class="p">,</span>
              <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;sslservercert&quot;</span>
          <span class="p">}],</span>
          <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;/keyPairs/sslServer&quot;</span>
      <span class="p">}</span>
</code></pre></div></p>
<p>The variablized <code>data.json.subst</code> is now a good candidate to for commiting to source control. The resulting <code>env_vars</code> file can be used as a guideline for secrets that should be managed externally and only delivered to the container/image as needed for it's specific environment. </p>
<h3 id="additional-notes">Additional Notes<a class="headerlink" href="#additional-notes" title="Permanent link"> ¶</a></h3>
<ul>
<li>The bulk api export is intended to be used as a <em>bulk</em> import. The <code>/bulk/import</code> endpoint is destructive and overwrites the entire current admin config.</li>
<li>If you are in a clustered environment, the pingfederate image will import the <code>data.json</code> and also replicate the configuration to engines in the cluster. </li>
</ul>
<h2 id="config-archive-profiles">Config Archive Profiles<a class="headerlink" href="#config-archive-profiles" title="Permanent link"> ¶</a></h2>
<h3 id="comparing-profile-methods">Comparing Profile Methods<a class="headerlink" href="#comparing-profile-methods" title="Permanent link"> ¶</a></h3>
<p>Configuration Archive based profiles have some pros/cons to weigh when compared to bulk api export profiles. You will find bulk api export profiles to be more advantageous in most scenarios besides devops principle purists.</p>
<p>Pros:</p>
<ul>
<li>The <code>/data</code> folder, opposed to a <code>data.json</code> file, is better for <a href="../profilesLayered/">profile layering</a></li>
<li>Configuration is available on engines at startup. This:</li>
<li>lowers dependency on the admin at initial cluster startup</li>
<li>enables mixed configurations in a single cluster. Canary-like "roll-out" instead of config pushed to all engines at once.</li>
</ul>
<p>Cons:</p>
<ul>
<li>The <code>/data</code> folder contains key pairs in a <code>.jks</code> so externally managing keys is very difficult. </li>
<li>encrypted data is scattered throughout the folder creating dependency on the master encryption key. </li>
</ul>
<h3 id="what-youll-do_1">What You'll Do<a class="headerlink" href="#what-youll-do_1" title="Permanent link"> ¶</a></h3>
<p>A summary of the resulting process: 
1. Export a <code>data.zip</code>
2. Optionally, variablize
3. Replace data folder</p>
<!-- 1. Export a configuration archive. 
This can be done through the UI `System > Server > Configuration Archive`
Or via Admin API: 
  <div class="highlight"><pre><span></span><code>curl -u administrator:2FederateM0re -H &quot;X-XSRF-Header: PingFederate&quot; -k https://pingfederate-admin.com/pf-admin-api/v1/configArchive/export --output &quot;${HOME}/Downloads/data.zip&quot; 
</code></pre></div>

  ```
  unzip -d data /path/to/data.zip
  ``` -->
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../profiles/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Customizing server profiles
              </div>
            </div>
          </a>
        
        
          <a href="../profilesLayered/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Layering server profiles
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.tabs', 'instant'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>